<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UNIPORT Bookstore - Admin Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#0000ff',
                        secondary: '#F2A900',
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50">
    <!-- Navigation Header -->
    <header class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex items-center">
                    <div class="text-white p-2 rounded-lg">
                        <img src="https://www.uniport.edu.ng/wp-content/themes/unipix/assets/images/logo/uniport_logo1.png" alt="UNIPORT Logo" class="h-8 w-8 object-contain">
                    </div>
                    <span class="ml-2 text-xl font-bold text-gray-900">
                        UNIPORT Bookstore
                    </span>
                    <span class="ml-2 text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded">Admin</span>
                </div>

                <!-- Admin Navigation -->
                <nav class="hidden md:flex items-center space-x-8">
                    <a href="index.html" class="text-gray-700 hover:text-primary font-medium">Store Front</a>
                    <a href="admin.html" class="text-primary font-medium border-b-2 border-primary">Dashboard</a>
                    <a href="#" onclick="logout()" class="text-gray-700 hover:text-primary font-medium">Logout</a>
                </nav>

                <!-- Mobile menu button -->
                <button class="md:hidden p-2 text-gray-600">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
    </header>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Page Header -->
        <div class="mb-8">
            <h1 class="text-3xl font-bold text-gray-900 mb-2">Admin Dashboard</h1>
            <p class="text-gray-600">Manage your bookstore operations</p>
        </div>

        <!-- Stats Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <!-- Total Sales -->
            <div class="bg-white rounded-lg shadow-sm border p-6">
                <div class="flex items-center">
                    <div class="bg-green-100 p-3 rounded-lg">
                        <i class="fas fa-money-bill-wave text-green-600 text-xl"></i>
                    </div>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-gray-600">Total Sales</p>
                        <p class="text-2xl font-bold text-gray-900" id="totalSales">₦0</p>
                    </div>
                </div>
                <div class="mt-4">
                    <span class="text-green-600 text-sm font-medium">
                        <i class="fas fa-arrow-up"></i> <span id="salesGrowth">0%</span>
                    </span>
                    <span class="text-gray-500 text-sm ml-2">from last month</span>
                </div>
            </div>

            <!-- Total Orders -->
            <div class="bg-white rounded-lg shadow-sm border p-6">
                <div class="flex items-center">
                    <div class="bg-blue-100 p-3 rounded-lg">
                        <i class="fas fa-shopping-cart text-blue-600 text-xl"></i>
                    </div>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-gray-600">Total Orders</p>
                        <p class="text-2xl font-bold text-gray-900" id="totalOrders">0</p>
                    </div>
                </div>
                <div class="mt-4">
                    <span class="text-green-600 text-sm font-medium">
                        <i class="fas fa-arrow-up"></i> <span id="ordersGrowth">0%</span>
                    </span>
                    <span class="text-gray-500 text-sm ml-2">from last month</span>
                </div>
            </div>

            <!-- Total Books -->
            <div class="bg-white rounded-lg shadow-sm border p-6">
                <div class="flex items-center">
                    <div class="bg-purple-100 p-3 rounded-lg">
                        <i class="fas fa-book text-purple-600 text-xl"></i>
                    </div>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-gray-600">Total Books</p>
                        <p class="text-2xl font-bold text-gray-900" id="totalBooks">0</p>
                    </div>
                </div>
                <div class="mt-4">
                    <span class="text-green-600 text-sm font-medium">
                        <i class="fas fa-arrow-up"></i> <span id="booksGrowth">0%</span>
                    </span>
                    <span class="text-gray-500 text-sm ml-2">from last month</span>
                </div>
            </div>

            <!-- Low Stock -->
            <div class="bg-white rounded-lg shadow-sm border p-6">
                <div class="flex items-center">
                    <div class="bg-red-100 p-3 rounded-lg">
                        <i class="fas fa-exclamation-triangle text-red-600 text-xl"></i>
                    </div>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-gray-600">Low Stock</p>
                        <p class="text-2xl font-bold text-gray-900" id="lowStockCount">0</p>
                    </div>
                </div>
                <div class="mt-4">
                    <span class="text-red-600 text-sm font-medium" id="stockAlert">All good</span>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Quick Actions -->
            <div class="lg:col-span-1">
                <div class="bg-white rounded-lg shadow-sm border p-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Quick Actions</h3>
                    <div class="space-y-3">
                        <button onclick="showAddBookModal()" class="w-full bg-primary text-white py-2 px-4 rounded-lg font-semibold hover:bg-primary/90 transition-colors flex items-center justify-center">
                            <i class="fas fa-plus mr-2"></i> Add New Book
                        </button>
                        <button onclick="exportReports()" class="w-full border border-gray-300 text-gray-700 py-2 px-4 rounded-lg font-semibold hover:bg-gray-50 transition-colors flex items-center justify-center">
                            <i class="fas fa-file-export mr-2"></i> Export Reports
                        </button>
                        <button onclick="manageUsers()" class="w-full border border-gray-300 text-gray-700 py-2 px-4 rounded-lg font-semibold hover:bg-gray-50 transition-colors flex items-center justify-center">
                            <i class="fas fa-users mr-2"></i> Manage Users
                        </button>
                        <button onclick="showSettings()" class="w-full border border-gray-300 text-gray-700 py-2 px-4 rounded-lg font-semibold hover:bg-gray-50 transition-colors flex items-center justify-center">
                            <i class="fas fa-cog mr-2"></i> Settings
                        </button>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="bg-white rounded-lg shadow-sm border p-6 mt-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Recent Activity</h3>
                    <div class="space-y-4" id="recentActivity">
                        <!-- Activity will be loaded dynamically -->
                    </div>
                </div>
            </div>

            <!-- Recent Orders and Low Stock -->
            <div class="lg:col-span-2">
                <!-- Recent Orders -->
                <div class="bg-white rounded-lg shadow-sm border p-6 mb-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold text-gray-900">Recent Orders</h3>
                        <button onclick="viewAllOrders()" class="text-primary hover:text-primary/80 text-sm font-medium">View All</button>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead>
                                <tr class="border-b">
                                    <th class="text-left py-2 text-sm font-medium text-gray-600">Order ID</th>
                                    <th class="text-left py-2 text-sm font-medium text-gray-600">Customer</th>
                                    <th class="text-left py-2 text-sm font-medium text-gray-600">Amount</th>
                                    <th class="text-left py-2 text-sm font-medium text-gray-600">Status</th>
                                    <th class="text-left py-2 text-sm font-medium text-gray-600">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="recentOrdersTable">
                                <!-- Orders will be loaded dynamically -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Low Stock Alert -->
                <div class="bg-white rounded-lg shadow-sm border p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold text-gray-900">Low Stock Alert</h3>
                        <button onclick="manageInventory()" class="text-primary hover:text-primary/80 text-sm font-medium">Manage Inventory</button>
                    </div>
                    <div class="space-y-3" id="lowStockAlerts">
                        <!-- Low stock items will be loaded dynamically -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Book Modal -->
    <div id="addBookModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold text-gray-900">Add New Book</h3>
                    <button onclick="hideAddBookModal()" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <form id="addBookForm" onsubmit="handleAddBook(event)" class="space-y-4">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Book Title *</label>
                            <input type="text" name="title" required class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary focus:border-transparent">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Author *</label>
                            <input type="text" name="author" required class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary focus:border-transparent">
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Price (₦) *</label>
                            <input type="number" name="price" required min="0" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Stock *</label>
                            <input type="number" name="stock" required min="0" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary focus:border-transparent">
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Department *</label>
                            <select name="department" required class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary focus:border-transparent">
                                <option value="">Select Department</option>
                                <option value="computer-science">Computer Science</option>
                                <option value="mathematics">Mathematics</option>
                                <option value="economics">Economics</option>
                                <option value="engineering">Engineering</option>
                                <option value="medicine">Medicine</option>
                                <option value="law">Law</option>
                                <option value="arts">Arts & Humanities</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Course Code</label>
                            <input type="text" name="course" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="e.g., CSC 101">
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ISBN</label>
                            <input type="text" name="isbn" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Format</label>
                            <select name="format" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary focus:border-transparent">
                                <option value="physical">Physical Copy</option>
                                <option value="digital">Digital Copy</option>
                            </select>
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Description</label>
                        <textarea name="description" rows="3" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary focus:border-transparent"></textarea>
                    </div>
                    
                    <div class="flex justify-end space-x-3 pt-4">
                        <button type="button" onclick="hideAddBookModal()" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors">
                            Cancel
                        </button>
                        <button type="submit" class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors flex items-center">
                            <i class="fas fa-plus mr-2"></i> Add Book
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 hidden transform transition-transform duration-300">
        <div class="flex items-center space-x-2">
            <i class="fas fa-check"></i>
            <span id="toastMessage">Operation completed successfully!</span>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12 mt-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-lg font-semibold mb-4">UNIPORT Bookstore</h3>
                    <p class="text-gray-400">
                        Your trusted source for academic materials and textbooks at University of Port Harcourt.
                    </p>
                    <div class="flex space-x-4 mt-4">
                        <a href="#" class="text-gray-400 hover:text-white transition-colors duration-300">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition-colors duration-300">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition-colors duration-300">
                            <i class="fab fa-instagram"></i>
                        </a>
                    </div>
                </div>
                
                <div>
                    <h4 class="font-semibold mb-4">Quick Links</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="index.html" class="hover:text-white transition-colors duration-300">Home</a></li>
                        <li><a href="books.html" class="hover:text-white transition-colors duration-300">Books</a></li>
                        <li><a href="cart.html" class="hover:text-white transition-colors duration-300">Shopping Cart</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="font-semibold mb-4">Support</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="#" class="hover:text-white transition-colors duration-300">Contact Us</a></li>
                        <li><a href="#" class="hover:text-white transition-colors duration-300">FAQ</a></li>
                        <li><a href="#" class="hover:text-white transition-colors duration-300">Shipping Info</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="font-semibold mb-4">Contact Info</h4>
                    <div class="text-gray-400 space-y-2">
                        <p><i class="fas fa-university mr-2"></i>University of Port Harcourt</p>
                        <p><i class="fas fa-map-marker-alt mr-2"></i>Choba, Rivers State</p>
                        <p><i class="fas fa-envelope mr-2"></i>bookstore@uniport.edu.ng</p>
                        <p><i class="fas fa-phone mr-2"></i>+234 (0) 123 456 7890</p>
                    </div>
                </div>
            </div>
            
            <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-400">
                <p>&copy; 2025 UNIPORT Bookstore. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Dummy Data Generation
        function generateDummyData() {
            // Generate dummy books if none exist
            if (!localStorage.getItem('books') || JSON.parse(localStorage.getItem('books')).length === 0) {
                const dummyBooks = [
                    {
                        id: 1,
                        title: "Introduction to Computer Science",
                        author: "Dr. John Smith",
                        price: 4500,
                        stock: 25,
                        department: "computer-science",
                        course: "CSC 101",
                        isbn: "978-0134670942",
                        format: "physical",
                        description: "Comprehensive introduction to computer science fundamentals",
                        rating: 4.5,
                        reviews: 12,
                        pages: 320,
                        publisher: "UNIPORT Press"
                    },
                    {
                        id: 2,
                        title: "Calculus and Analytical Geometry",
                        author: "Prof. Mary Johnson",
                        price: 3800,
                        stock: 3,
                        department: "mathematics",
                        course: "MTH 101",
                        isbn: "978-0321963635",
                        format: "physical",
                        description: "Fundamental concepts of calculus with practical applications",
                        rating: 4.2,
                        reviews: 8,
                        pages: 450,
                        publisher: "UNIPORT Press"
                    },
                    {
                        id: 3,
                        title: "Principles of Microeconomics",
                        author: "Dr. Robert Williams",
                        price: 5200,
                        stock: 15,
                        department: "economics",
                        course: "ECO 101",
                        isbn: "978-1285165905",
                        format: "physical",
                        description: "Introduction to microeconomic theory and applications",
                        rating: 4.7,
                        reviews: 15,
                        pages: 380,
                        publisher: "UNIPORT Press"
                    },
                    {
                        id: 4,
                        title: "Organic Chemistry Fundamentals",
                        author: "Prof. Sarah Davis",
                        price: 6100,
                        stock: 2,
                        department: "medicine",
                        course: "CHE 201",
                        isbn: "978-1260119107",
                        format: "physical",
                        description: "Comprehensive guide to organic chemistry principles",
                        rating: 4.3,
                        reviews: 6,
                        pages: 520,
                        publisher: "UNIPORT Press"
                    },
                    {
                        id: 5,
                        title: "Engineering Mechanics",
                        author: "Dr. Michael Brown",
                        price: 4900,
                        stock: 18,
                        department: "engineering",
                        course: "ENG 101",
                        isbn: "978-0133915386",
                        format: "physical",
                        description: "Statics and dynamics for engineering students",
                        rating: 4.6,
                        reviews: 10,
                        pages: 410,
                        publisher: "UNIPORT Press"
                    },
                    {
                        id: 6,
                        title: "Nigerian Legal System",
                        author: "Prof. Grace Adebayo",
                        price: 6700,
                        stock: 7,
                        department: "law",
                        course: "LAW 101",
                        isbn: "978-9781532345",
                        format: "physical",
                        description: "Introduction to the Nigerian legal framework",
                        rating: 4.8,
                        reviews: 5,
                        pages: 290,
                        publisher: "UNIPORT Press"
                    }
                ];
                localStorage.setItem('books', JSON.stringify(dummyBooks));
            }

            // Generate dummy orders if none exist
            if (!localStorage.getItem('userOrders') || JSON.parse(localStorage.getItem('userOrders')).length === 0) {
                const dummyOrders = [
                    {
                        id: "UNIPORT-2024-001",
                        date: "2024-01-15T10:30:00Z",
                        items: [
                            { id: 1, title: "Introduction to Computer Science", price: 4500, quantity: 1 },
                            { id: 3, title: "Principles of Microeconomics", price: 5200, quantity: 1 }
                        ],
                        subtotal: 9700,
                        shipping: 500,
                        tax: 727,
                        total: "₦10,927",
                        status: "delivered",
                        progress: 100,
                        shippingInfo: {
                            firstName: "Chinedu",
                            lastName: "Okoro",
                            email: "chinedu.okoro@student.uniport.edu.ng",
                            phone: "08031234567",
                            address: "Faculty of Science Building",
                            department: "Computer Science",
                            room: "Lab 101"
                        },
                        payment: {
                            method: "paystack",
                            reference: "PSK-2024001",
                            status: "completed",
                            timestamp: "2024-01-15T10:35:00Z"
                        },
                        delivery: {
                            estimated: "2024-01-17T14:00:00Z",
                            status: "delivered"
                        },
                        tracking: {
                            steps: [
                                { name: 'order_placed', completed: true, date: "2024-01-15T10:30:00Z" },
                                { name: 'processing', completed: true, date: "2024-01-15T11:15:00Z" },
                                { name: 'shipped', completed: true, date: "2024-01-16T09:20:00Z" },
                                { name: 'out_for_delivery', completed: true, date: "2024-01-17T10:45:00Z" },
                                { name: 'delivered', completed: true, date: "2024-01-17T13:30:00Z" }
                            ]
                        }
                    },
                    {
                        id: "UNIPORT-2024-002",
                        date: "2024-01-18T14:20:00Z",
                        items: [
                            { id: 2, title: "Calculus and Analytical Geometry", price: 3800, quantity: 2 }
                        ],
                        subtotal: 7600,
                        shipping: 500,
                        tax: 570,
                        total: "₦8,670",
                        status: "shipped",
                        progress: 60,
                        shippingInfo: {
                            firstName: "Amina",
                            lastName: "Yusuf",
                            email: "amina.yusuf@student.uniport.edu.ng",
                            phone: "08029876543",
                            address: "Faculty of Engineering Complex",
                            department: "Mathematics",
                            room: "Office 205"
                        },
                        payment: {
                            method: "paystack",
                            reference: "PSK-2024002",
                            status: "completed",
                            timestamp: "2024-01-18T14:25:00Z"
                        },
                        delivery: {
                            estimated: "2024-01-22T16:00:00Z",
                            status: "shipped"
                        },
                        tracking: {
                            steps: [
                                { name: 'order_placed', completed: true, date: "2024-01-18T14:20:00Z" },
                                { name: 'processing', completed: true, date: "2024-01-18T15:10:00Z" },
                                { name: 'shipped', completed: true, date: "2024-01-19T11:30:00Z" },
                                { name: 'out_for_delivery', completed: false, date: null },
                                { name: 'delivered', completed: false, date: null }
                            ]
                        }
                    },
                    {
                        id: "UNIPORT-2024-003",
                        date: "2024-01-20T09:15:00Z",
                        items: [
                            { id: 4, title: "Organic Chemistry Fundamentals", price: 6100, quantity: 1 },
                            { id: 5, title: "Engineering Mechanics", price: 4900, quantity: 1 }
                        ],
                        subtotal: 11000,
                        shipping: 500,
                        tax: 825,
                        total: "₦12,325",
                        status: "processing",
                        progress: 40,
                        shippingInfo: {
                            firstName: "Emeka",
                            lastName: "Nwankwo",
                            email: "emeka.nwankwo@student.uniport.edu.ng",
                            phone: "08051234567",
                            address: "College of Health Sciences",
                            department: "Medicine",
                            room: "Lab 302"
                        },
                        payment: {
                            method: "paystack",
                            reference: "PSK-2024003",
                            status: "completed",
                            timestamp: "2024-01-20T09:20:00Z"
                        },
                        delivery: {
                            estimated: "2024-01-24T11:00:00Z",
                            status: "processing"
                        },
                        tracking: {
                            steps: [
                                { name: 'order_placed', completed: true, date: "2024-01-20T09:15:00Z" },
                                { name: 'processing', completed: true, date: "2024-01-20T10:05:00Z" },
                                { name: 'shipped', completed: false, date: null },
                                { name: 'out_for_delivery', completed: false, date: null },
                                { name: 'delivered', completed: false, date: null }
                            ]
                        }
                    },
                    {
                        id: "UNIPORT-2024-004",
                        date: "2024-01-21T16:45:00Z",
                        items: [
                            { id: 6, title: "Nigerian Legal System", price: 6700, quantity: 1 }
                        ],
                        subtotal: 6700,
                        shipping: 500,
                        tax: 502,
                        total: "₦7,702",
                        status: "out-for-delivery",
                        progress: 80,
                        shippingInfo: {
                            firstName: "Funke",
                            lastName: "Adeleke",
                            email: "funke.adeleke@student.uniport.edu.ng",
                            phone: "08063219876",
                            address: "Faculty of Law Building",
                            department: "Law",
                            room: "Library Wing"
                        },
                        payment: {
                            method: "paystack",
                            reference: "PSK-2024004",
                            status: "completed",
                            timestamp: "2024-01-21T16:50:00Z"
                        },
                        delivery: {
                            estimated: "2024-01-23T15:30:00Z",
                            status: "out-for-delivery"
                        },
                        tracking: {
                            steps: [
                                { name: 'order_placed', completed: true, date: "2024-01-21T16:45:00Z" },
                                { name: 'processing', completed: true, date: "2024-01-22T08:30:00Z" },
                                { name: 'shipped', completed: true, date: "2024-01-22T14:15:00Z" },
                                { name: 'out_for_delivery', completed: true, date: "2024-01-23T09:45:00Z" },
                                { name: 'delivered', completed: false, date: null }
                            ]
                        }
                    },
                    {
                        id: "UNIPORT-2024-005",
                        date: "2024-01-22T11:20:00Z",
                        items: [
                            { id: 1, title: "Introduction to Computer Science", price: 4500, quantity: 3 },
                            { id: 3, title: "Principles of Microeconomics", price: 5200, quantity: 2 }
                        ],
                        subtotal: 23900,
                        shipping: 500,
                        tax: 1792,
                        total: "₦26,192",
                        status: "processing",
                        progress: 40,
                        shippingInfo: {
                            firstName: "David",
                            lastName: "Okafor",
                            email: "david.okafor@student.uniport.edu.ng",
                            phone: "08074561239",
                            address: "Faculty of Social Sciences",
                            department: "Economics",
                            room: "Seminar Room 4"
                        },
                        payment: {
                            method: "paystack",
                            reference: "PSK-2024005",
                            status: "completed",
                            timestamp: "2024-01-22T11:25:00Z"
                        },
                        delivery: {
                            estimated: "2024-01-26T13:00:00Z",
                            status: "processing"
                        },
                        tracking: {
                            steps: [
                                { name: 'order_placed', completed: true, date: "2024-01-22T11:20:00Z" },
                                { name: 'processing', completed: true, date: "2024-01-22T12:10:00Z" },
                                { name: 'shipped', completed: false, date: null },
                                { name: 'out_for_delivery', completed: false, date: null },
                                { name: 'delivered', completed: false, date: null }
                            ]
                        }
                    }
                ];
                localStorage.setItem('userOrders', JSON.stringify(dummyOrders));
            }
        }

        // Initialize admin dashboard
        function initAdminDashboard() {
            generateDummyData();
            loadStats();
            loadRecentOrders();
            loadLowStockAlerts();
            loadRecentActivity();
        }

        function loadStats() {
            const orders = JSON.parse(localStorage.getItem('userOrders')) || [];
            const books = JSON.parse(localStorage.getItem('books')) || [];
            
            // Calculate total sales
            const totalSales = orders.reduce((sum, order) => {
                const amount = parseInt(order.total.replace('₦', '').replace(',', '')) || 0;
                return sum + amount;
            }, 0);
            
            // Calculate total orders
            const totalOrders = orders.length;
            
            // Calculate total books
            const totalBooks = books.length;
            
            // Find low stock items
            const lowStockItems = books.filter(book => book.stock < 10);
            const lowStockCount = lowStockItems.length;
            
            // Update UI
            document.getElementById('totalSales').textContent = `₦${totalSales.toLocaleString()}`;
            document.getElementById('totalOrders').textContent = totalOrders;
            document.getElementById('totalBooks').textContent = totalBooks;
            document.getElementById('lowStockCount').textContent = lowStockCount;
            
            // Update growth indicators
            document.getElementById('salesGrowth').textContent = '12.5%';
            document.getElementById('ordersGrowth').textContent = '8.2%';
            document.getElementById('booksGrowth').textContent = '5.3%';
            
            // Update stock alert
            const stockAlert = document.getElementById('stockAlert');
            if (lowStockCount > 0) {
                stockAlert.textContent = `${lowStockCount} items need attention`;
                stockAlert.className = 'text-red-600 text-sm font-medium';
            } else {
                stockAlert.textContent = 'All good';
                stockAlert.className = 'text-green-600 text-sm font-medium';
            }
        }

        function loadRecentOrders() {
            const orders = JSON.parse(localStorage.getItem('userOrders')) || [];
            const recentOrders = orders.slice(-5).reverse();
            
            const ordersTable = document.getElementById('recentOrdersTable');
            
            if (recentOrders.length === 0) {
                ordersTable.innerHTML = `
                    <tr>
                        <td colspan="5" class="py-4 text-center text-gray-500">
                            No orders found
                        </td>
                    </tr>
                `;
                return;
            }
            
            ordersTable.innerHTML = recentOrders.map(order => `
                <tr class="border-b hover:bg-gray-50">
                    <td class="py-3 text-sm font-medium">${order.id}</td>
                    <td class="py-3 text-sm">${order.shippingInfo.firstName} ${order.shippingInfo.lastName}</td>
                    <td class="py-3 text-sm">${order.total}</td>
                    <td class="py-3 text-sm">
                        <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${
                            order.status === 'processing' ? 'bg-yellow-100 text-yellow-800' :
                            order.status === 'shipped' ? 'bg-blue-100 text-blue-800' :
                            order.status === 'out-for-delivery' ? 'bg-purple-100 text-purple-800' :
                            order.status === 'delivered' ? 'bg-green-100 text-green-800' :
                            'bg-gray-100 text-gray-800'
                        }">
                            ${order.status.charAt(0).toUpperCase() + order.status.slice(1)}
                        </span>
                    </td>
                    <td class="py-3 text-sm">
                        <button onclick="updateOrderStatus('${order.id}')" class="text-primary hover:text-primary/80 mr-2" title="Update Status">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button onclick="viewOrderDetails('${order.id}')" class="text-gray-600 hover:text-gray-800" title="View Details">
                            <i class="fas fa-eye"></i>
                        </button>
                    </td>
                </tr>
            `).join('');
        }

        function loadLowStockAlerts() {
            const books = JSON.parse(localStorage.getItem('books')) || [];
            const lowStockItems = books.filter(book => book.stock < 10);
            
            const lowStockContainer = document.getElementById('lowStockAlerts');
            
            if (lowStockItems.length === 0) {
                lowStockContainer.innerHTML = `
                    <div class="text-center py-4 text-gray-500">
                        <i class="fas fa-check-circle text-green-400 text-2xl mb-2"></i>
                        <p>All items are well stocked</p>
                    </div>
                `;
                return;
            }
            
            lowStockContainer.innerHTML = lowStockItems.map(book => `
                <div class="flex items-center justify-between p-3 ${
                    book.stock < 5 ? 'bg-red-50 border-l-4 border-red-500' : 'bg-yellow-50 border-l-4 border-yellow-500'
                } rounded-lg">
                    <div class="flex-1">
                        <p class="font-medium text-gray-900">${book.title}</p>
                        <p class="text-sm text-gray-600">Stock: ${book.stock} copies</p>
                        <p class="text-xs text-gray-500">ISBN: ${book.isbn || 'N/A'}</p>
                    </div>
                    <div class="flex space-x-2">
                        <button onclick="restockBook(${book.id})" class="bg-primary text-white px-3 py-1 rounded text-sm hover:bg-primary/90 transition-colors">
                            Restock
                        </button>
                        <button onclick="editBook(${book.id})" class="bg-gray-200 text-gray-700 px-3 py-1 rounded text-sm hover:bg-gray-300 transition-colors">
                            <i class="fas fa-edit"></i>
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function loadRecentActivity() {
            const activity = [
                { type: 'order', message: 'New order #UNIPORT-2024-005 received', time: '2 hours ago', icon: 'shopping-cart', color: 'green' },
                { type: 'user', message: 'New user registered: David Okafor', time: '3 hours ago', icon: 'user-plus', color: 'blue' },
                { type: 'stock', message: 'Low stock alert: Organic Chemistry Fundamentals', time: '5 hours ago', icon: 'exclamation-triangle', color: 'yellow' },
                { type: 'book', message: 'New book added: Nigerian Legal System', time: '1 day ago', icon: 'book', color: 'purple' },
                { type: 'order', message: 'Order #UNIPORT-2024-004 marked as out for delivery', time: '1 day ago', icon: 'shipping-fast', color: 'blue' }
            ];
            
            const activityContainer = document.getElementById('recentActivity');
            activityContainer.innerHTML = activity.map(item => `
                <div class="flex items-start">
                    <div class="bg-${item.color}-100 p-2 rounded-lg">
                        <i class="fas fa-${item.icon} text-${item.color}-600"></i>
                    </div>
                    <div class="ml-3">
                        <p class="text-sm font-medium text-gray-900">${item.message}</p>
                        <p class="text-xs text-gray-500">${item.time}</p>
                    </div>
                </div>
            `).join('');
        }

        // Book Management
        function showAddBookModal() {
            document.getElementById('addBookModal').classList.remove('hidden');
        }

        function hideAddBookModal() {
            document.getElementById('addBookModal').classList.add('hidden');
            document.getElementById('addBookForm').reset();
        }

        function handleAddBook(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            
            const newBook = {
                id: Date.now(),
                title: formData.get('title'),
                author: formData.get('author'),
                price: parseInt(formData.get('price')),
                stock: parseInt(formData.get('stock')),
                department: formData.get('department'),
                course: formData.get('course'),
                isbn: formData.get('isbn'),
                format: formData.get('format'),
                description: formData.get('description'),
                rating: 4.5,
                reviews: 0,
                pages: 300,
                publisher: 'UNIPORT Press'
            };
            
            // Get existing books
            const books = JSON.parse(localStorage.getItem('books')) || [];
            books.push(newBook);
            localStorage.setItem('books', JSON.stringify(books));
            
            hideAddBookModal();
            showToast('Book added successfully!');
            
            // Refresh data
            loadStats();
            loadLowStockAlerts();
            loadRecentActivity();
        }

        function restockBook(bookId) {
            const books = JSON.parse(localStorage.getItem('books')) || [];
            const bookIndex = books.findIndex(book => book.id === bookId);
            
            if (bookIndex !== -1) {
                const additionalStock = parseInt(prompt(`Enter additional stock for "${books[bookIndex].title}":`, "10"));
                
                if (!isNaN(additionalStock) && additionalStock > 0) {
                    books[bookIndex].stock += additionalStock;
                    localStorage.setItem('books', JSON.stringify(books));
                    
                    showToast(`Restocked ${additionalStock} copies of "${books[bookIndex].title}"`);
                    loadStats();
                    loadLowStockAlerts();
                }
            }
        }

        function editBook(bookId) {
            const books = JSON.parse(localStorage.getItem('books')) || [];
            const book = books.find(b => b.id === bookId);
            
            if (book) {
                // Pre-fill the add book form with existing data
                document.querySelector('input[name="title"]').value = book.title;
                document.querySelector('input[name="author"]').value = book.author;
                document.querySelector('input[name="price"]').value = book.price;
                document.querySelector('input[name="stock"]').value = book.stock;
                document.querySelector('select[name="department"]').value = book.department;
                document.querySelector('input[name="course"]').value = book.course || '';
                document.querySelector('input[name="isbn"]').value = book.isbn || '';
                document.querySelector('select[name="format"]').value = book.format;
                document.querySelector('textarea[name="description"]').value = book.description || '';
                
                showAddBookModal();
                showToast(`Editing: ${book.title}`);
            }
        }

        // Order Management
        function updateOrderStatus(orderId) {
            const orders = JSON.parse(localStorage.getItem('userOrders')) || [];
            const order = orders.find(o => o.id === orderId);
            
            if (order) {
                const currentStatus = order.status;
                let newStatus;
                
                switch(currentStatus) {
                    case 'processing':
                        newStatus = 'shipped';
                        break;
                    case 'shipped':
                        newStatus = 'out-for-delivery';
                        break;
                    case 'out-for-delivery':
                        newStatus = 'delivered';
                        break;
                    default:
                        newStatus = 'processing';
                }
                
                if (confirm(`Update order ${orderId} status from ${currentStatus} to ${newStatus}?`)) {
                    order.status = newStatus;
                    
                    // Update tracking steps
                    const stepIndex = order.tracking.steps.findIndex(step => !step.completed);
                    if (stepIndex !== -1) {
                        order.tracking.steps[stepIndex].completed = true;
                        order.tracking.steps[stepIndex].date = new Date().toISOString();
                    }
                    
                    localStorage.setItem('userOrders', JSON.stringify(orders));
                    
                    showToast(`Order ${orderId} status updated to ${newStatus}`);
                    loadRecentOrders();
                    loadRecentActivity();
                }
            }
        }

        function viewOrderDetails(orderId) {
            const orders = JSON.parse(localStorage.getItem('userOrders')) || [];
            const order = orders.find(o => o.id === orderId);
            
            if (order) {
                const itemsList = order.items.map(item => 
                    `${item.title} (Qty: ${item.quantity}) - ₦${(item.price * item.quantity).toLocaleString()}`
                ).join('\n');
                
                alert(`Order Details:\n\nOrder ID: ${order.id}\nCustomer: ${order.shippingInfo.firstName} ${order.shippingInfo.lastName}\nEmail: ${order.shippingInfo.email}\nDepartment: ${order.shippingInfo.department}\nStatus: ${order.status}\nTotal: ${order.total}\n\nItems:\n${itemsList}`);
            }
        }

        function viewAllOrders() {
            alert('This would navigate to a comprehensive orders management page with all orders displayed in a detailed table with advanced filtering options.');
        }

        // Other Admin Functions
        function exportReports() {
            showToast('Sales and inventory reports exported successfully! Download will begin shortly.');
            // In real implementation, this would generate and download CSV/PDF reports
        }

        function manageUsers() {
            alert('This would open user management interface showing all registered users with their order history and account status.');
        }

        function manageInventory() {
            alert('This would open comprehensive inventory management with bulk operations, stock alerts, and supplier management.');
        }

        function showSettings() {
            alert('This would open admin settings panel for configuring store policies, payment methods, and notification preferences.');
        }

        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                localStorage.removeItem('currentUser');
                window.location.href = 'login.html';
            }
        }

        // Utility Functions
        function showToast(message) {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toastMessage');
            
            toastMessage.textContent = message;
            toast.classList.remove('hidden');
            
            setTimeout(() => {
                toast.classList.add('hidden');
            }, 3000);
        }

        // Close modal when clicking outside
        document.getElementById('addBookModal').addEventListener('click', function(e) {
            if (e.target === this) {
                hideAddBookModal();
            }
        });

        // Initialize admin dashboard
        document.addEventListener('DOMContentLoaded', function() {
            initAdminDashboard();
        });
    </script>
</body>
</html>